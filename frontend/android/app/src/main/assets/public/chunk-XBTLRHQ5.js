import{a as Ct}from"./chunk-4YYS34RD.js";import{a as ft,c as pt,f as _t,h as xt,j as bt}from"./chunk-7AYWC2PE.js";import{A as w,B as a,C as l,Ca as ct,D as b,Da as dt,E as P,F as f,G as s,H as z,Ha as mt,I as G,Ia as gt,J as X,Ja as ut,K as F,Ka as ht,L as h,M as T,N as O,O as V,P as D,R as A,S as j,T as Q,U as R,aa as N,ba as H,ca as W,da as J,ea as K,fa as U,ga as Z,ha as tt,ia as et,k as E,l as m,m as g,ma as nt,n as $,o as Y,s as S,sa as it,t as d,ta as ot,u as B,ua as rt,v as k,va as at,w as C,wa as lt,x as v,xa as st,y as I,z as M}from"./chunk-MPTE3GQA.js";import"./chunk-Y2PDZ72K.js";import"./chunk-Z6NEOT2M.js";import"./chunk-MSMJJC2X.js";import"./chunk-53OGNGEH.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-REYR55MP.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var vt=["noteCarousel"],L=(r,c)=>c.id;function Pt(r,c){if(r&1){let i=P();a(0,"div",11),f("click",function(){let e=m(i).$implicit,n=s();return g(n.selectTab(e.id))}),a(1,"span",12),h(2),l(),a(3,"button",13),f("click",function(e){let n=m(i).$implicit,o=s();return g(o.closeTab(n.id,e))}),h(4," \xD7 "),l()()}if(r&2){let i=c.$implicit,t=s();F("active",t.activeTabId()===i.id),d(),w("title",i.title),d(),T(i.title)}}function yt(r,c){r&1&&(a(0,"ion-item",16)(1,"ion-label")(2,"h2"),h(3,"No notes yet"),l(),a(4,"p"),h(5,"Create your first note in the Create tab"),l()()())}function wt(r,c){if(r&1&&h(0),r&2){let i=s().$implicit;O(" \xB7 ",i.language," ")}}function Tt(r,c){if(r&1&&(h(0),V(1,"number")),r&2){let i=s().$implicit;O(" \xB7 ",D(1,1,i.duration,"1.0-1"),"s ")}}function Nt(r,c){if(r&1){let i=P();a(0,"ion-item",18),f("dragover",function(e){let n=m(i).$implicit,o=s(2);return g(o.onDragOver(e,n.id))})("dragleave",function(e){m(i);let n=s(2);return g(n.onDragLeave(e))})("drop",function(e){let n=m(i).$implicit,o=s(2);return g(o.onDrop(e,n.id))}),a(1,"div",19),f("dragstart",function(e){let n=m(i).$implicit,o=s(2);return g(o.onDragStart(e,n.id))})("touchstart",function(e){let n=m(i).$implicit,o=s(2);return g(o.onTouchStart(e,n.id))})("touchmove",function(e){m(i);let n=s(2);return g(n.onTouchMove(e))})("touchend",function(e){m(i);let n=s(2);return g(n.onTouchEnd(e))}),$(),a(2,"svg",20),b(3,"circle",21)(4,"circle",22)(5,"circle",23)(6,"circle",24)(7,"circle",25)(8,"circle",26),l()(),Y(),a(9,"ion-label",27),f("click",function(){let e=m(i).$implicit,n=s(2);return g(n.openNote(e.id))}),a(10,"div",28)(11,"h2"),h(12),l()(),a(13,"p",29),h(14),l(),a(15,"ion-note",30),h(16),V(17,"date"),C(18,wt,1,1),C(19,Tt,2,4),l()(),a(20,"div",31)(21,"ion-button",32),f("click",function(){let e=m(i).$implicit,n=s(2);return g(n.openNote(e.id))}),b(22,"ion-icon",33),l(),a(23,"ion-button",34),f("click",function(){let e=m(i).$implicit,n=s(2);return g(n.deleteNote(e.id))}),b(24,"ion-icon",35),l()()()}if(r&2){let i=c.$implicit;k("data-note-id",i.id),d(12),T(i.title),d(2),T(i.body),d(2),O(" ",D(17,6,i.createdAt,"medium")," "),d(2),v(i.language?18:-1),d(),v(i.duration?19:-1)}}function St(r,c){if(r&1){let i=P();a(0,"section",9)(1,"ion-searchbar",14),f("ionInput",function(e){m(i);let n=s();return g(n.onSearch(e))}),l(),a(2,"ion-list",15),C(3,yt,6,0,"ion-item",16),I(4,Nt,25,9,"ion-item",17,L),l()()}if(r&2){let i=s();d(3),v(i.filteredNotes().length===0?3:-1),d(),M(i.filteredNotes())}}function It(r,c){if(r&1){let i=P();a(0,"form",42),f("ngSubmit",function(){m(i);let e=s(3);return g(e.saveActiveNote())}),a(1,"ion-item",43),b(2,"ion-input",44),l(),a(3,"ion-item",43),b(4,"ion-textarea",45),l(),a(5,"div",46)(6,"ion-button",47),b(7,"ion-icon",48),h(8," Save changes "),l()()()}if(r&2){let i=s(3);w("formGroup",i.editForm),d(6),w("disabled",i.editForm.invalid)}}function Mt(r,c){if(r&1&&(a(0,"article",37)(1,"div",38)(2,"div",39)(3,"div")(4,"p",40),h(5,"Editing"),l(),a(6,"h2"),h(7),l()()(),C(8,It,9,2,"form",41),l()()),r&2){let i=c.$implicit,t=s(2);k("data-note-id",i.id),d(7),T(i.title),d(),v(t.activeTabId()===i.id?8:-1)}}function Ot(r,c){if(r&1){let i=P();a(0,"section",10)(1,"div",36,0),f("scroll",function(){m(i);let e=s();return g(e.onCarouselScroll())}),I(3,Mt,9,3,"article",37,L),l()()}if(r&2){let i=s();d(3),M(i.openedNotes())}}var zt=(()=>{let c=class c{constructor(){this.store=E(Ct),this.fb=E(Z),this.searchTerm=S(""),this.openTabIds=S([]),this.activeTabId=S(null),this.isScrollingProgrammatically=!1,this.editForm=this.fb.group({title:["",[N.required,N.minLength(1)]],body:["",[N.required,N.minLength(1)]]}),this.filteredNotes=A(()=>{let t=this.searchTerm().toLowerCase();return t?this.store.notes().filter(e=>e.title.toLowerCase().includes(t)||e.body.toLowerCase().includes(t)):this.store.notes()}),this.activeNote=A(()=>{let t=this.activeTabId();return t?this.store.notes().find(e=>e.id===t)??null:null}),this.draggedNoteId=null,this.touchStartY=0,this.touchStartX=0,this.touchStartElement=null,this.touchCurrentElement=null,this.isDragging=!1,ft({trashOutline:bt,expandOutline:_t,closeOutline:pt,saveOutline:xt}),this.store.loadNotes(),j(()=>{let t=this.activeNote();t?this.editForm.patchValue({title:t.title,body:t.body},{emitEvent:!1}):this.editForm.reset()})}onSearch(t){let e=t.detail.value||"";this.searchTerm.set(e)}deleteNote(t){this.store.deleteNote(t)}onDragStart(t,e){this.draggedNoteId=e,t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",e));let n=t.currentTarget.closest(".note-item");n&&n.classList.add("dragging")}onDragOver(t,e){t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move");let n=t.currentTarget;this.draggedNoteId&&this.draggedNoteId!==e&&n.classList.add("drag-over")}onDragLeave(t){t.currentTarget.classList.remove("drag-over")}onDragEnd(t){t.currentTarget.classList.remove("dragging"),document.querySelectorAll(".note-item").forEach(e=>{e.classList.remove("drag-over","dragging")}),this.draggedNoteId=null}onDrop(t,e){if(t.preventDefault(),t.currentTarget.classList.remove("drag-over"),this.draggedNoteId&&this.draggedNoteId!==e){let o=this.store.notes(),u=o.findIndex(_=>_.id===this.draggedNoteId),p=o.findIndex(_=>_.id===e);u>=0&&p>=0&&u!==p&&this.store.reorderNotes(u,p)}document.querySelectorAll(".note-item").forEach(o=>{o.classList.remove("dragging","drag-over")}),this.draggedNoteId=null}onTouchStart(t,e){let n=t.touches[0];this.touchStartY=n.clientY,this.touchStartX=n.clientX;let o=t.currentTarget;this.touchStartElement=o.closest(".note-item"),this.touchStartElement&&(this.draggedNoteId=e,this.isDragging=!1)}onTouchMove(t){if(!this.touchStartElement||!this.draggedNoteId)return;let e=t.touches[0],n=Math.abs(e.clientY-this.touchStartY),o=Math.abs(e.clientX-this.touchStartX);if(!this.isDragging&&(n>10||o>10)&&(this.isDragging=!0,this.touchStartElement.classList.add("dragging"),t.preventDefault()),!this.isDragging)return;let p=e.clientY-this.touchStartY;this.touchStartElement.style.transform=`translateY(${p}px)`,this.touchStartElement.style.transition="none",this.touchStartElement.style.zIndex="1000";let _=Array.from(document.querySelectorAll(".note-item")),y=null;for(let x of _){if(x===this.touchStartElement)continue;let q=x.getBoundingClientRect();if(e.clientY>=q.top&&e.clientY<=q.bottom){y=x;break}}if(_.forEach(x=>{x!==this.touchStartElement&&x.classList.remove("drag-over")}),y){let x=y.getAttribute("data-note-id");x&&x!==this.draggedNoteId&&(y.classList.add("drag-over"),this.touchCurrentElement=y)}else this.touchCurrentElement=null;t.preventDefault()}onTouchEnd(t){if(!this.touchStartElement||!this.draggedNoteId){this.isDragging=!1;return}if(this.isDragging){let e=this.store.notes(),n=e.findIndex(o=>o.id===this.draggedNoteId);if(this.touchCurrentElement){let o=this.touchCurrentElement.getAttribute("data-note-id");if(o){let u=e.findIndex(p=>p.id===o);n>=0&&u>=0&&n!==u&&this.store.reorderNotes(n,u)}}}this.touchStartElement&&(this.touchStartElement.style.transform="",this.touchStartElement.style.transition="",this.touchStartElement.style.zIndex="",this.touchStartElement.classList.remove("dragging")),document.querySelectorAll(".note-item").forEach(e=>{e.classList.remove("drag-over","dragging")}),this.draggedNoteId=null,this.touchStartElement=null,this.touchCurrentElement=null,this.touchStartY=0,this.touchStartX=0,this.isDragging=!1}openNote(t){let e=this.openTabIds();e.includes(t)||this.openTabIds.set([...e,t]),this.activeTabId.set(t),queueMicrotask(()=>this.syncCarouselToActive())}selectTab(t){this.activeTabId()!==t&&(this.activeTabId.set(t),requestAnimationFrame(()=>this.syncCarouselToActive()))}closeTab(t,e){e?.stopPropagation();let n=this.openTabIds().filter(o=>o!==t);this.openTabIds.set(n),this.activeTabId()===t&&this.activeTabId.set(n.length?n[n.length-1]:null),queueMicrotask(()=>this.syncCarouselToActive())}showList(){this.activeTabId.set(null)}saveActiveNote(){let t=this.activeTabId();if(!t)return;if(this.editForm.invalid){this.editForm.markAllAsTouched();return}let{title:e,body:n}=this.editForm.value;this.store.updateNote(t,{title:(e||"").trim(),body:(n||"").trim()})}hasOpenTabs(){return this.openTabIds().length>0}openedNotes(){let t=this.openTabIds(),e=this.store.notes();return t.map(n=>e.find(o=>o.id===n)).filter(n=>!!n)}onCarouselScroll(){if(this.isScrollingProgrammatically)return;let t=this.noteCarousel?.nativeElement;if(!t)return;let e=t.offsetWidth;if(!e)return;let n=Math.round(t.scrollLeft/e),o=this.openedNotes()[n];o&&this.activeTabId()!==o.id&&this.activeTabId.set(o.id)}syncCarouselToActive(){let t=this.noteCarousel?.nativeElement;if(!t){requestAnimationFrame(()=>this.syncCarouselToActive());return}let e=this.activeTabId();if(!e){this.isScrollingProgrammatically=!0,t.scrollTo({left:0,behavior:"smooth"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.isScrollingProgrammatically=!1})});return}let n=t.querySelector(`[data-note-id="${e}"]`);if(n){this.isScrollingProgrammatically=!0,n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"});let o=0,u=()=>{o++,o<5?requestAnimationFrame(u):this.isScrollingProgrammatically=!1};requestAnimationFrame(u)}else{let o=this.openedNotes().findIndex(u=>u.id===e);if(o>=0){let u=o*t.offsetWidth;this.isScrollingProgrammatically=!0,t.scrollTo({left:u,behavior:"smooth"});let p=0,_=()=>{p++,p<5?requestAnimationFrame(_):this.isScrollingProgrammatically=!1};requestAnimationFrame(_)}}}};c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=B({type:c,selectors:[["app-notes"]],viewQuery:function(e,n){if(e&1&&z(vt,5),e&2){let o;G(o=X())&&(n.noteCarousel=o.first)}},decls:15,vars:4,consts:[["noteCarousel",""],[3,"translucent"],[1,"notes-content"],[1,"content-wrapper"],[1,"notes-tab-bar"],["type","button",1,"tab-chip",3,"click"],[1,"tab-label"],[1,"tab-chip-scroll"],["role","button","tabindex","0",1,"tab-chip",3,"active"],[1,"list-panel"],[1,"editor-stage"],["role","button","tabindex","0",1,"tab-chip",3,"click"],[1,"tab-label",3,"title"],["type","button","aria-label","Close note tab",1,"chip-close",3,"click"],["placeholder","Search notes...","debounce","300",3,"ionInput"],["lines","none",1,"notes-list"],[1,"empty-state"],[1,"note-item"],[1,"note-item",3,"dragover","dragleave","drop"],["aria-label","Drag to reorder","draggable","true",1,"drag-handle",3,"dragstart","touchstart","touchmove","touchend"],["width","16","height","24","viewBox","0 0 16 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","4","cy","4","r","2","fill","currentColor"],["cx","12","cy","4","r","2","fill","currentColor"],["cx","4","cy","12","r","2","fill","currentColor"],["cx","12","cy","12","r","2","fill","currentColor"],["cx","4","cy","20","r","2","fill","currentColor"],["cx","12","cy","20","r","2","fill","currentColor"],[2,"flex","1",3,"click"],[1,"note-header"],[1,"note-body"],[1,"note-meta"],[1,"note-actions"],["fill","clear","color","medium","aria-label","Open note",3,"click"],["name","expand-outline"],["fill","clear","color","danger","aria-label","Delete note",3,"click"],["name","trash-outline"],[1,"editor-carousel",3,"scroll"],[1,"editor-slide"],[1,"editor-card"],[1,"editor-header"],[1,"eyebrow"],[1,"editor-form",3,"formGroup"],[1,"editor-form",3,"ngSubmit","formGroup"],["lines","none"],["label","Title","labelPlacement","stacked","formControlName","title","placeholder","Note title"],["label","Body","labelPlacement","stacked","formControlName","body","autoGrow","true","rows","14"],[1,"editor-actions"],["type","submit",3,"disabled"],["slot","start","name","save-outline"]],template:function(e,n){e&1&&(a(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),h(3,"Notes"),l()()(),a(4,"ion-content",2)(5,"div",3)(6,"div",4)(7,"button",5),f("click",function(){return n.showList()}),a(8,"span",6),h(9,"Notes"),l()(),a(10,"div",7),I(11,Pt,5,4,"div",8,L),l()(),C(13,St,6,1,"section",9)(14,Ot,5,0,"section",10),l()()),e&2&&(w("translucent",!0),d(7),F("active",!n.activeTabId()),d(4),M(n.openedNotes()),d(2),v(n.activeTabId()?14:13))},dependencies:[ot,dt,ct,it,ut,lt,rt,at,nt,mt,st,ht,gt,tt,J,H,W,et,K,U,Q,R],styles:[".notes-content[_ngcontent-%COMP%]{--background: linear-gradient(180deg, #181818 0%, #0d0d0d 65%, #050505 100%);--padding-start: clamp(1rem, 3vw, 2.5rem);--padding-end: clamp(1rem, 3vw, 2.5rem);--padding-top: 1.25rem;--padding-bottom: 1.25rem}.content-wrapper[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;display:flex;flex-direction:column;gap:1rem}.notes-tab-bar[_ngcontent-%COMP%]{display:flex;gap:.65rem;align-items:center;overflow-x:auto;scrollbar-width:none;padding:.25rem 0}.notes-tab-bar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.tab-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:0 1.1rem;border-radius:14px;border:1px solid rgba(255,255,255,.14);background:#1f1f1f;font-weight:600;cursor:pointer;transition:background .2s,border .2s,box-shadow .2s;flex-shrink:0;min-width:150px;max-width:220px;height:44px;box-shadow:0 10px 18px #00000059}.tab-chip.active[_ngcontent-%COMP%]{background:#2a2a2a;border-color:#0a84ff;box-shadow:0 14px 28px #00000059}.tab-chip-scroll[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-shrink:0}.tab-label[_ngcontent-%COMP%]{flex:1;text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:.92rem}.chip-close[_ngcontent-%COMP%]{background:none;border:none;color:#ffffffb3;width:22px;height:22px;border-radius:6px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:color .2s,background .2s}.chip-close[_ngcontent-%COMP%]:hover{color:#fff;background:#ffffff14}.list-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}ion-searchbar[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .05);--border-radius: 16px;--color: #f8fafc;--placeholder-color: rgba(232, 236, 242, .5);padding:0}.notes-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;background:none}.note-item[_ngcontent-%COMP%]{--background: transparent;padding:1rem 0;border-radius:18px;border:1px solid #2a2a2a;background:#1f1f1f;transition:transform .2s,opacity .2s,box-shadow .2s;display:flex;align-items:center;gap:.75rem}.note-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #00000073}.note-item.dragging[_ngcontent-%COMP%]{opacity:.3;transform:scale(.98);box-shadow:0 8px 24px #00b8ff4d;border-color:#00b8ff80;transition:none}.note-item.drag-over[_ngcontent-%COMP%]{border-top:2px solid rgba(0,184,255,.6)}.drag-handle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:grab;color:#94a3b899;transition:color .2s,transform .2s;flex-shrink:0;touch-action:none;-webkit-user-select:none;user-select:none;margin-right:20px}.drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing;color:#00b8ffcc;transform:scale(1.1)}.drag-handle[_ngcontent-%COMP%]:hover{color:#00b8ffcc}.drag-handle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:24px}.note-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;font-weight:600}.note-body[_ngcontent-%COMP%]{color:#ffffffd9;margin:.5rem 0;line-height:1.45;max-height:4.4em;overflow:hidden}.note-meta[_ngcontent-%COMP%]{color:#a7a7a7;font-size:.9rem}.note-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem;margin-left:15px}.note-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--background: rgba(10, 132, 255, .2);--color: #ffffff;box-shadow:0 10px 24px #0a84ff40}.editor-stage[_ngcontent-%COMP%]{height:100vh;position:relative}.editor-carousel[_ngcontent-%COMP%]{display:flex;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;height:fit-content;position:absolute;inset:0;scrollbar-width:none}.editor-carousel[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.editor-slide[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;flex-shrink:0;scroll-snap-align:start;height:fit-content;overflow-y:auto}.editor-card[_ngcontent-%COMP%]{width:min(640px,100%);background:#1f1f1f;border:1px solid #2a2a2a;border-radius:26px;box-shadow:0 24px 48px #0000008c;padding:1.75rem;display:flex;flex-direction:column;gap:1.25rem;height:fit-content}.editor-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.editor-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:1.5rem;line-height:1.3}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.3em;font-size:.65rem;color:#94a3b8cc}.editor-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.editor-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--border-color: rgba(255, 255, 255, .1);--padding-start: 0;--padding-end: 0;--inner-padding-end: 0;--inner-padding-start: 0;align-items:flex-start;min-height:70px}.editor-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding-left:0;margin-bottom:.5rem;color:#a7a7a7}.editor-form[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .editor-form[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--background: transparent;--padding-start: 0;--padding-end: 0;--highlight-color-focused: var(--ion-color-primary);--highlight-color: var(--ion-color-primary);color:#fff}.editor-form[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{flex:1;min-height:200px}.editor-form[_ngcontent-%COMP%]   .native-input[_ngcontent-%COMP%], .editor-form[_ngcontent-%COMP%]   .native-textarea[_ngcontent-%COMP%]{background:transparent}.editor-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:auto;padding-top:1rem}.editor-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{min-width:160px}.empty-state[_ngcontent-%COMP%]{--background: transparent;text-align:center;padding:3rem 1rem;color:#94a3b8cc;border:none}.empty-state[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-align:center;margin-left:50px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e8ecf2e6;margin-bottom:.5rem;font-weight:600}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8b3;margin:0}"]});let r=c;return r})();export{zt as NotesPage};
